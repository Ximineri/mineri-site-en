<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINĒRI - A Partnership Proposal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        /* CSS COMPLET INTÉGRÉ */
        :root {
            --accent-color: #770099;
            --dark-color: #1a1a1a;
            --light-color: #ffffff;
            --grey-color: #f4f4f4;
            --text-color: #333333;
            --header-height: 70px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html { scroll-behavior: smooth; scroll-padding-top: var(--header-height); }
        body { font-family: 'Montserrat', sans-serif; line-height: 1.6; color: var(--text-color); background-color: var(--light-color); }
        .container { max-width: 1200px; margin: auto; padding: 2rem; }
        .section-title { text-align: center; margin-bottom: 2rem; margin-top: 3rem; }
        .section-title h2, .section-title h3 { color: var(--dark-color); }
        .section-title h2 { font-size: 2.5rem; }
        .section-title h3 { font-size: 2rem; font-weight: 500; }
        .intro-text { text-align: center; max-width: 800px; margin: 0 auto 3rem auto; font-size: 1.1rem; }
        .note { font-size: 0.9em; font-style: italic; text-align: center; margin-top: 1rem; color: #666; }
        .main-header { background-color: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); position: fixed; top: 0; left: 0; width: 100%; height: var(--header-height); z-index: 1000; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .main-nav { display: flex; justify-content: center; align-items: center; position: relative; max-width: 1300px; margin: auto; height: 100%; padding: 0 2rem; }
        .main-nav ul { list-style: none; display: flex; }
        .main-nav ul li a { text-decoration: none; color: var(--dark-color); padding: 0.5rem 1rem; margin: 0 0.5rem; font-weight: 500; transition: color 0.3s ease; }
        .main-nav ul li a:hover { color: var(--accent-color); }
        #presentation { padding-top: var(--header-height); }
        .hero { height: 80vh; background: url('https://i.postimg.cc/7h55xqB6/Wallpaper-Mineri.png') no-repeat center center/cover; }
        .win-win-section { background: var(--grey-color); padding: 4rem 0; text-align: center; }
        .win-win-section h3 { font-size: 2.2rem; margin-bottom: 1rem; }
        .win-win-section p { max-width: 900px; margin: 0 auto; font-size: 1.1rem; }
        .gallery { display: grid; grid-template-columns: repeat(3, 1fr); grid-auto-rows: 250px; gap: 1rem; margin: 3rem 0; }
        .gallery-item { position: relative; overflow: hidden; border-radius: 8px; }
        .gallery-item.large { grid-column: span 2; grid-row: span 2; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.4s ease; }
        .gallery-item:hover img { transform: scale(1.05); }
        .gallery-text { position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent); color: white; padding: 2rem 1rem 1rem; transform: translateY(100%); transition: transform 0.4s ease; opacity: 0; }
        .gallery-item:hover .gallery-text { transform: translateY(0); opacity: 1; }
        .gallery-text h4 { font-size: 1.3rem; margin-bottom: 0.25rem; }
        .team-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 3rem; }
        .team-member { text-align: center; }
        .team-member img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem; border: 3px solid var(--accent-color); }
        .team-member h4 { font-size: 1.3rem; }
        .team-member .role { font-weight: 700; color: var(--accent-color); }
        #business-plan, #contract { background-color: #f9f9f9; padding: 4rem 0; }
        #contract { background-color: var(--light-color); }
        .accordion-header { background-color: var(--dark-color); color: var(--light-color); cursor: pointer; padding: 1.5rem 2rem; width: 100%; text-align: left; border: none; outline: none; transition: background-color 0.4s ease; display: flex; justify-content: space-between; align-items: center; }
        .accordion-header h2 { font-size: 1.8rem; }
        .accordion-header:hover { background-color: var(--accent-color); }
        .accordion-header .plus-minus { font-size: 2rem; }
        .accordion-content { padding: 0 2rem; background-color: white; max-height: 0; overflow: hidden; transition: max-height 0.5s ease-out, padding 0.5s ease-out; }
        .accordion-content.active { padding: 2rem; }
        .simulator { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem; }
        .slider-group label { font-weight: 500; margin-bottom: 0.5rem; display: block; }
        .slider { width: 100%; -webkit-appearance: none; height: 8px; background: #ddd; outline: none; border-radius: 4px; }
        .slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; background: var(--accent-color); cursor: pointer; border-radius: 50%; }
        .financials-grid-v2 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; text-align: center; }
        .financial-card-v2 { padding: 1.5rem; border-radius: 8px; border: 1px solid #ddd; background: #fff; }
        .financial-card-v2 h4 { font-size: 1.1rem; color: #555; height: 40px; }
        .financial-card-v2 .amount { font-size: 2.5rem; font-weight: 700; margin: 0.5rem 0; color: var(--dark-color); }
        .financial-card-v2.profit .amount { color: var(--accent-color); }
        #full-contract-content-wrapper { max-height: 500px; overflow-y: auto; border: 1px solid #eee; padding: 1rem; margin-bottom: 2rem; }
        .contract-article { padding-bottom: 1rem; margin-bottom: 1rem; border-bottom: 1px solid #eee; }
        .contract-article:last-child { border-bottom: none; }
        .contract-article h3 { font-size: 1.5rem; color: var(--accent-color); margin-bottom: 1rem; }
        fieldset { border: 1px solid #ddd; border-radius: 8px; padding: 1.5rem; margin-top: 1.5rem; }
        legend { padding: 0 0.5rem; font-weight: 700; }
        .option-label { display: block; border: 2px solid #ddd; border-radius: 8px; padding: 1rem; cursor: pointer; transition: all 0.3s ease; }
        .option-label:hover { border-color: var(--accent-color); }
        .option-label.selected { border-color: var(--accent-color); background-color: #f8e6ff; }
        input[type="radio"] { opacity: 0; position: absolute; }
        #contract-summary { margin-top: 2rem; padding: 1.5rem; background: var(--grey-color); border-radius: 8px; }
        .cta-button { display: block; width: 100%; padding: 1rem; background-color: var(--accent-color); color: white; border: none; border-radius: 8px; font-size: 1.2rem; font-weight: 700; cursor: pointer; margin-top: 2rem; transition: background-color 0.3s; }
        .cta-button:hover { background-color: var(--dark-color); }
        .main-footer { background: var(--dark-color); color: var(--light-color); text-align: center; padding: 2rem; }
        @media(max-width: 768px) {
            .main-nav { flex-direction: column; height: auto; padding: 1rem; justify-content: center; position: relative; }
            .main-nav ul { order: 1; flex-wrap: wrap; justify-content: center; }
            html { scroll-padding-top: 140px; }
            .hero { height: 50vh; }
            .gallery { grid-template-columns: 1fr; grid-auto-rows: 250px; }
            .gallery-item.large { grid-column: span 1; grid-row: span 1; }
            .simulator { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <nav class="main-nav">
            <ul>
                <li><a href="#presentation">The Experience</a></li>
                <li><a href="#business-plan">The Business Plan</a></li>
                <li><a href="#contract">The Agreement</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="presentation">
            <div class="hero"></div>
            <div class="container">
                <div class="section-title"><h2>The MINĒRI Spirit: The Art of Savoring Life</h2></div>
                <p class="intro-text">MINĒRI is the crystallization of a vision: a place where sensory pleasure, cultural exchange, and passion meet. Far from a mere luxury villa, it is a crossroads of conviviality where wine and spirits, orchestrated by your Host's oenological expertise, are the catalysts for human communion and emulation. It's a space where you reconnect with authentic pleasures in an exceptional setting, prioritizing authenticity over ostentation.</p>
            </div>
            <div class="win-win-section">
                <div class="container">
                    <h3>A Win-Win Partnership to Magnify Your Asset</h3>
                    <p>Our goal is to establish a true partnership with you, the Owner. We are committed to maintaining your villa in pristine condition, enhancing its value and prestige through our high standards. By transforming your property into a dynamic and sought-after commercial asset, we directly align our success with yours, maximizing your property's revenue potential and offering you a significantly higher return on investment than a classic rental.</p>
                </div>
            </div>
             <div class="container">
                <div class="section-title"><h3>An Immersive Experience Curated by Your Host</h3></div>
                <div class="gallery">
                    <div class="gallery-item large"><img src="https://i.postimg.cc/rwV6cDzy/Open-villa.png" alt="An open and convivial living space"><div class="gallery-text"><h4>The Art of Conviviality</h4><p>The heart of the MINĒRI experience is the "convivial guest table", centered around a quality dinner aperitif.</p></div></div>
                    <div class="gallery-item"><img src="https://i.postimg.cc/J0SG0SgQ/Wine-buffet.png" alt="A curated buffet of wine and spirits"><div class="gallery-text"><h4>The Host's Cellar</h4><p>A fun, educational, and sensory immersion into the world of wine and spirits, guided by your Host's expertise.</p></div></div>
                    <div class="gallery-item"><img src="https://i.postimg.cc/MKbkh76r/3-peoples-pool.png" alt="Guests enjoying the pool area"><div class="gallery-text"><h4>Exclusive Stays</h4><p>An authentic and personalized experience for an affluent international clientele.</p></div></div>
                     <div class="gallery-item"><img src="https://i.postimg.cc/nctbRRJD/Kitchen.png" alt="Modern kitchen for culinary experiences"><div class="gallery-text"><h4>Local Gastronomy</h4><p>Inventive local gastronomy in a buffet/tapas style, focusing on freshness.</p></div></div>
                    <div class="gallery-item"><img src="https://i.postimg.cc/jSZpjRJH/Dining-pool.png" alt="Dining area by the pool"><div class="gallery-text"><h4>Private Events</h4><p>The villa can be privatized for special events like intimate weddings or team buildings.</p></div></div>
                </div>
                <div class="section-title"><h3>The Founding Team</h3></div>
                <div class="team-grid">
                    <div class="team-member"><img src="https://i.postimg.cc/TP1ZLBrZ/Xi-Lerale.jpg" alt="Portrait of Xi Lerale"><h4>Xi Lerale</h4><p class="role">Founder, CEO & Resident Host</p></div>
                    <div class="team-member"><img src="https://i.postimg.cc/9fksG1bz/An-Thuong.png" alt="Portrait of An Thuong"><h4>An Thuong</h4><p class="role">Co-Founder & CTO</p></div>
                    <div class="team-member"><img src="https://i.postimg.cc/Hx7R35vz/Thao-Linh.png" alt="Portrait of Thao Linh"><h4>Thao Linh</h4><p class="role">Manager Housekeeper</p></div>
                </div>
            </div>
        </section>

        <section id="business-plan">
            <div class="container">
                <div class="accordion">
                    <button class="accordion-header"><h2>The Interactive & Dynamic Business Plan</h2><span class="plus-minus">+</span></button>
                    <div class="accordion-content">
                        <div class="bp-section">
                            <h3>Financial Projections Simulator</h3>
                            <p>This simulator allows you to explore the revenue potential based on different scenarios. The following figures are based on the business plan and can be adjusted.</p>
                            <div class="simulator">
                                <div class="slider-group"><label for="occupancyRate">Occupancy Rate: <span id="occupancyValue">67</span>%</label><input type="range" id="occupancyRate" min="30" max="90" value="67" class="slider"></div>
                                <div class="slider-group"><label for="nightlyRate">Average Nightly Rate: $<span id="nightlyRateValue">1000</span></label><input type="range" id="nightlyRate" min="700" max="1500" value="1000" step="50" class="slider"></div>
                            </div>
                            <div class="financials-grid-v2">
                                <div class="financial-card-v2"><h4>Estimated Gross Monthly Revenue</h4><p class="amount" id="simGrossRevenue">$24,000</p></div>
                                <div class="financial-card-v2"><h4>Owner's Potential Share (Rent + 15% Comm.)</h4><p class="amount" id="simOwnerShare">$6,600</p></div>
                                <div class="financial-card-v2 profit"><h4>MINĒRI's Gross Profit (Thang Long Event)</h4><p class="amount" id="simMineriProfit">$5,020</p></div>
                            </div>
                             <p class="note">Note: Projections are based on 2 events/month at $2,000/event, and include estimated operational costs. The fixed rent of $3,000 used in this calculation is a negotiable baseline.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contract">
            <div class="container">
                 <div class="accordion">
                    <button class="accordion-header"><h2>The Interactive Master Lease Agreement</h2><span class="plus-minus">+</span></button>
                    <div class="accordion-content">
                        <p class="intro-text">Here is the full Master Lease Agreement. Please review the articles and select your preferred options. You can then generate a printable version based on your choices.</p>
                        <div id="full-contract-content-wrapper">
                            </div>
                        <div id="contract-summary">
                            <h3>Summary of Your Selections</h3>
                            <div id="summary-content"><ul id="summary-list"></ul></div>
                        </div>
                        <button id="printButton" class="cta-button">Generate & Print Agreement</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <p>&copy; 2025 MINĒRI. All Rights Reserved.</p>
    </footer>

    <script>
        // JAVASCRIPT COMPLET, FINAL ET CORRIGÉ AVEC LA CORRECTION DE TIMING
        function initializeApp() {
            // --- Accordion Logic ---
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const isActive = content.style.maxHeight;
                    if (isActive) {
                        content.style.maxHeight = null;
                        header.querySelector('.plus-minus').textContent = '+';
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                        header.querySelector('.plus-minus').textContent = '-';
                    }
                });
            });

            // --- Business Plan Simulator Logic ---
            const occupancySlider = document.getElementById('occupancyRate');
            const nightlyRateSlider = document.getElementById('nightlyRate');
            function calculateFinancials() {
                if (!occupancySlider) return;
                const occupancy = parseInt(occupancySlider.value);
                const rate = parseInt(nightlyRateSlider.value);
                document.getElementById('occupancyValue').textContent = occupancy;
                document.getElementById('nightlyRateValue').textContent = rate;
                const nightsPerMonth = 30, eventRevenue = 4000, fAndBCostPerNight = 480, otherCosts = 3380, ownerFixedRent = 3000, ownerCommissionRate = 0.15;
                const occupiedNights = nightsPerMonth * (occupancy / 100);
                const residentialRevenue = occupiedNights * rate;
                const totalGrossRevenue = residentialRevenue + eventRevenue;
                const ownerShare = ownerFixedRent + (totalGrossRevenue * ownerCommissionRate);
                const totalOperationalCosts = otherCosts + (occupiedNights * fAndBCostPerNight);
                const mineriProfit = totalGrossRevenue - ownerShare - totalOperationalCosts;
                document.getElementById('simGrossRevenue').textContent = '$' + Math.round(totalGrossRevenue).toLocaleString();
                document.getElementById('simOwnerShare').textContent = '$' + Math.round(ownerShare).toLocaleString();
                document.getElementById('simMineriProfit').textContent = '$' + Math.round(mineriProfit).toLocaleString();
            }
            if (occupancySlider) {
                occupancySlider.addEventListener('input', calculateFinancials);
                nightlyRateSlider.addEventListener('input', calculateFinancials);
                calculateFinancials();
            }

            // --- Contract Data and Building ---
            const contractData = {
                header: `<h2>MASTER LEASE AGREEMENT</h2><p><strong>BETWEEN THE UNDERSIGNED:</strong></p><p><strong>THE OWNER:</strong><br/>[FULL NAME OF OWNER]<br/>[FULL ADDRESS OF OWNER]<br/>[PHONE NUMBER OF OWNER]<br/>[EMAIL ADDRESS OF OWNER]</p><p>AND</p><p><strong>THE MASTER LESSEE:</strong><br/>The company Thang Long Event<br/>Represented by Mr. LERALE Alexis, Founder & CEO of MINĒRI</p>`,
                articles: [
                    { id: 1, title: "Article 1: Purpose of the Agreement", content: "<p>This agreement aims at the provision by the Owner to the Master Lessee of the property described hereinafter, for its commercial exploitation under the MINĒRI brand, dedicated to luxury tourist accommodation and event organization. This partnership seeks to maximize the Villa's value and generate optimized revenues for both Parties.</p>" },
                    { id: 2, title: "Article 2: Property Description", content: "<p>This agreement pertains to the luxury villa located at [FULL ADDRESS OF THE VILLA], including [NUMBER] bedrooms and facilities such as a private swimming pool, garden, etc.</p>" },
                    { id: 3, title: "Article 3: Term of the Agreement and Renewal Conditions", content: "<p>The initial term of this Master Lease Agreement is for twelve (12) consecutive months. At the end of the initial term, the agreement shall be tacitly renewed for successive periods of twelve (12) months, unless either Party notifies the other of its intention not to renew at least three (3) months before the expiry of the current term.</p>" },
                    { id: 4, title: "Article 4: Financial Conditions", content: "<p><strong>Monthly Fixed Rent:</strong> The Master Lessee undertakes to pay the Owner a fixed monthly rent of 3,000 USD (Three Thousand United States Dollars). This is a negotiable baseline.</p><p><strong>Commission on Gross Revenue:</strong> In addition to the fixed rent, the Master Lessee undertakes to pay the Owner a commission of 15% (Fifteen percent) on the gross revenue generated by the exploitation of the Villa.</p>", options: [{ name: "securityDeposit", legend: "A. Regarding the Security Deposit", choices: [{ value: "A.1", title: "Option A.1: Temporary Exemption and Gradual Constitution.", text: "No security deposit required at the start of the contract. The security deposit will be progressively constituted by 10% of MINĒRI's monthly net profits, starting from the fourth month of activity, until it reaches the equivalent of 1.5 months of fixed rent." },{ value: "A.2", title: "Option A.2: Staggered Payment over the First 6 Months.", text: "The security deposit, equivalent to 1.5 months of fixed rent, will be staggered into 6 equal installments over the first six months of the contract." }]}, { name: "initialRent", legend: "B. Regarding the Initial Rent Period", choices: [{ value: "B.1", title: "Option B.1: Initial Grace Period (Commission Only).", text: "For the first two (2) months of the contract, only the gross revenue commission percentage (15%) will be due. The fixed rent of 3,000 USD/month will become payable from the third month onwards." },{ value: "B.2", title: "Option B.2: Reduced Fixed Rent for 3 Months.", text: "The fixed rent will be reduced to 1,500 USD/month (i.e., 50% of the initial amount) for the first three (3) months of the contract. The full fixed rent will become payable from the fourth month onwards." }]}]},
                    { id: 5, title: "Article 5: Property Use and Commercial Authorization", content: "<p>The Owner expressly authorizes the company Thang Long Event (operating under the MINĒRI brand) to use the Villa exclusively for commercial purposes, including luxury tourist accommodation and as an event venue. The Owner grants the Master Lessee the irrevocable right to sublease the Villa to third parties (Guests) under its full and sole responsibility.</p>" },
                    { id: 6, title: "Article 6: Allocation of Responsibilities and Villa Maintenance", content: "<p><strong>Owner's Responsibilities:</strong> The Owner remains responsible for the structural elements and heavy infrastructure of the Villa (e.g., roofing, foundations, main electrical/plumbing systems, pool pumps).<br><strong>MINĒRI's Responsibilities:</strong> MINĒRI undertakes the operational management and routine maintenance (e.g., general supervision, guest reception, replacement of light bulbs, small repairs for normal wear and tear).</p>", options: [{ name: "cleaning", legend: "C. Specific Responsibility: Deep Cleaning & Laundry Management", choices: [{ value: "C.1", title: "Option C.1: Owner Fully Handles Cleaning and Laundry.", text: "The Owner is responsible for organizing and financing all deep cleaning of the villa after each guest departure, as well as providing, renewing, and maintaining all household linen." },{ value: "C.2", title: "Option C.2: MINĒRI Manages via Owner's Services (Reimbursable).", text: "MINĒRI will organize and supervise deep cleaning and laundry management after each departure, using the Owner's usual service providers. The costs will be invoiced to MINĒRI by the Owner." },{ value: "C.3", title: "Option C.3: MINĒRI Fully Handles Cleaning and Laundry.", text: "MINĒRI is responsible for organizing, supervising, and financing all deep cleaning of the villa after each guest departure, as well as providing, renewing, and maintaining all household linen." }]}]},
                    { id: 7, title: "Article 7: Insurance and Coverage Responsibilities", content: "<p>The Owner undertakes to take out and maintain a multi-risk home insurance policy covering the Villa's structure. MINĒRI (Thang Long Event) undertakes to take out and maintain a Professional Civil Liability / Operations Insurance covering the commercial activity.</p>" },
                    { id: 8, title: "Article 8: General Obligations of the Parties", content: "<p>The Owner shall make the Villa available in perfect working and habitable condition and guarantee peaceful enjoyment. The Master Lessee shall use the Villa in accordance with the defined purpose, maintain it in good condition, and comply with all applicable laws and regulations.</p>" },
                    { id: 9, title: "Article 9: Dispute Resolution", content: "<p>Any dispute shall be resolved by prioritizing amicable solutions through a phased approach: 1. Direct Amicable Negotiation, 2. Mediation, 3. Arbitration, 4. Judicial Recourse to the competent courts of Da Nang/Quảng Nam.</p>" },
                    { id: 10, title: "Article 10: Early Termination Conditions", content: "<p>The contract may be terminated by either party in the event of a serious and repeated breach of its contractual obligations by the other party, after a formal notice has remained without effect. It may also be terminated in case of force majeure or total destruction of the Villa.</p>" },
                    { id: 11, title: "Article 11: General Provisions", content: "<p>This agreement shall be governed by and construed in accordance with the laws of Vietnam. Any amendment must be made in writing and signed by both Parties.</p>" }
                ],
                footer: "<br/><br/><p><strong>THE OWNER</strong><br/><br/>_________________________<br/>[FULL NAME OF OWNER]</p><br/><br/><p><strong>THE MASTER LESSEE</strong><br/>For Thang Long Event<br/><br/>_________________________<br/>Mr. LERALE Alexis</p>"
            };
            
            const contractWrapper = document.getElementById('full-contract-content-wrapper');
            if (contractWrapper) {
                let html = '';
                contractData.articles.forEach(article => {
                    html += `<div class="contract-article"><h3>${article.title}</h3>${article.content || ''}`;
                    if (article.options) {
                        article.options.forEach(optionGroup => {
                            html += `<fieldset><legend>${optionGroup.legend}</legend><div class="option-group">`;
                            optionGroup.choices.forEach(choice => {
                                html += `<label class="option-label"><input type="radio" name="${optionGroup.name}" value="${choice.value}"><div><strong>${choice.title}</strong><p>${choice.text}</p></div></label>`;
                            });
                            html += `</div></fieldset>`;
                        });
                    }
                    html += `</div>`;
                });
                contractWrapper.innerHTML = html;
            }
            
            const contractOptions = document.querySelectorAll('#contract input[type="radio"]');
            const summaryList = document.getElementById('summary-list');
            function updateSummary() {
                if (!summaryList) return;
                const selectedOptions = document.querySelectorAll('#contract input[type="radio"]:checked');
                document.querySelectorAll('.option-label').forEach(label => label.classList.remove('selected'));
                selectedOptions.forEach(radio => radio.closest('.option-label').classList.add('selected'));
                summaryList.innerHTML = ''; 
                if (selectedOptions.length === 0) {
                    summaryList.innerHTML = `<li><p>Please select an option in each category...</p></li>`;
                } else {
                    selectedOptions.forEach(option => {
                        const groupNameEl = option.closest('fieldset').querySelector('legend');
                        const optionTitleEl = option.closest('.option-label').querySelector('strong');
                        const li = document.createElement('li');
                        li.innerHTML = `<strong>${groupNameEl.textContent}:</strong> ${optionTitleEl.textContent}`;
                        summaryList.appendChild(li);
                    });
                }
                const accordionContent = summaryList.closest('.accordion-content');
                if (accordionContent && accordionContent.style.maxHeight) {
                    accordionContent.style.maxHeight = accordionContent.scrollHeight + "px";
                }
            }
            contractOptions.forEach(option => option.addEventListener('change', updateSummary));
            updateSummary();
            
            const printButton = document.getElementById('printButton');
            if(printButton) {
                printButton.addEventListener('click', () => {
                    let printableHTML = `<h1>MASTER LEASE AGREEMENT</h1>${contractData.header}`;
                    contractData.articles.forEach(article => {
                        printableHTML += `<h3>${article.title}</h3>`;
                        if (article.options) {
                            printableHTML += article.content;
                            article.options.forEach(optionGroup => {
                                const selectedOption = document.querySelector(`input[name="${optionGroup.name}"]:checked`);
                                printableHTML += `<h4>${optionGroup.legend}</h4>`;
                                if (selectedOption) {
                                    const choiceData = optionGroup.choices.find(c => c.value === selectedOption.value);
                                    printableHTML += `<div style="border:1px solid #ccc; padding:10px;"><strong>${choiceData.title}</strong><p>${choiceData.text}</p></div>`;
                                } else {
                                    printableHTML += `<p><em>No option selected for this section.</em></p>`;
                                }
                            });
                        } else {
                            printableHTML += article.content;
                        }
                    });
                    printableHTML += contractData.footer;

                    const printWindow = window.open('', '_blank');
                    printWindow.document.write(`
                        <html><head><title>MINĒRI - Master Lease Agreement for Signature</title>
                        <style>
                            body { font-family: 'Times New Roman', Times, serif; line-height: 1.5; margin: 2cm; } 
                            h1, h2, h3, h4, strong { font-family: Arial, sans-serif; } 
                            h3 { color: #770099; border-top: 1px solid #ccc; padding-top: 1em; margin-top: 1em;}
                            p { margin-top: 0.5em; margin-bottom: 0.5em; }
                        </style></head>
                        <body>${printableHTML}</body></html>
                    `);
                    printWindow.document.close();
                    printWindow.focus();
                    setTimeout(() => { printWindow.print(); }, 500);
                });
            }
        }
        
        // This wrapper ensures all code runs only after the entire page (including images) is fully loaded.
        // It's the most robust way to prevent timing issues.
        window.addEventListener('load', initializeApp);
    </script>
</body>
</html>
